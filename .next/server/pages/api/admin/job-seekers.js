"use strict";(()=>{var e={};e.id=986,e.ids=[986],e.modules={1649:e=>{e.exports=require("next-auth/react")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},2141:(e,t,s)=>{s.r(t),s.d(t,{config:()=>p,default:()=>f,routeModule:()=>g});var r={};s.r(r),s.d(r,{default:()=>d});var n=s(1802),a=s(7153),i=s(6249),o=s(1649),u=s(3214);async function d(e,t){let s=await (0,o.getSession)({req:e});if(!s||!s.user)return t.status(401).json({message:"Unauthorized"});if(!await u.Z.admin.findUnique({where:{email:s.user.email}}))return t.status(403).json({message:"Forbidden: Admin access required"});switch(e.method){case"GET":return c(e,t);case"PUT":return l(e,t);case"DELETE":return m(e,t);default:return t.status(405).json({message:"Method not allowed"})}}async function c(e,t){try{let{page:s=1,limit:r=10,status:n,search:a}=e.query,i=(parseInt(s)-1)*parseInt(r),o={};n&&(o.status=n),a&&(o.OR=[{firstName:{contains:a,mode:"insensitive"}},{lastName:{contains:a,mode:"insensitive"}},{email:{contains:a,mode:"insensitive"}},{skills:{contains:a,mode:"insensitive"}},{preferredLocation:{contains:a,mode:"insensitive"}}]);let d=await u.Z.jobSeeker.findMany({where:o,skip:i,take:parseInt(r),orderBy:{createdAt:"desc"}}),c=await u.Z.jobSeeker.count({where:o});return t.status(200).json({data:d,pagination:{total:c,page:parseInt(s),limit:parseInt(r),totalPages:Math.ceil(c/parseInt(r))}})}catch(e){return console.error("Error fetching job seekers:",e),t.status(500).json({message:"Error fetching job seekers"})}}async function l(e,t){try{let{id:s}=e.query,{status:r}=e.body;if(!s)return t.status(400).json({message:"Job seeker ID is required"});if(!r||!["pending","reviewed","matched"].includes(r))return t.status(400).json({message:"Valid status is required"});let n=await u.Z.jobSeeker.update({where:{id:s},data:{status:r}});return t.status(200).json({success:!0,message:"Job seeker status updated successfully",data:n})}catch(e){return console.error("Error updating job seeker:",e),t.status(500).json({message:"Error updating job seeker"})}}async function m(e,t){try{let{id:s}=e.query;if(!s)return t.status(400).json({message:"Job seeker ID is required"});return await u.Z.jobSeeker.delete({where:{id:s}}),t.status(200).json({success:!0,message:"Job seeker deleted successfully"})}catch(e){return console.error("Error deleting job seeker:",e),t.status(500).json({message:"Error deleting job seeker"})}}let f=(0,i.l)(r,"default"),p=(0,i.l)(r,"config"),g=new n.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/admin/job-seekers",pathname:"/api/admin/job-seekers",bundlePath:"",filename:""},userland:r})},3214:(e,t,s)=>{s.d(t,{Z:()=>n});let r=require("@prisma/client"),n=global.prisma||new r.PrismaClient},7153:(e,t)=>{var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},1802:(e,t,s)=>{e.exports=s(145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var s=t(t.s=2141);module.exports=s})();